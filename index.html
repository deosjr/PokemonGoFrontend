<!DOCTYPE html>
<head>
  <title>PokemonGo</title>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <p>Response: <span class="response"></span></p>

  <div class="containerdiv">
    <img src="background.png">
    <img id="selfimg" class="selfimg">
    <img id="enemyimg" class="enemyimg">

    <button style="top: 280px;right: 400px;" class="button" onclick="move()">Move 1</button>
    <button style="top: 280px;right: 200px;" class="button" onclick="move()">Move 2</button>
    <button style="top: 310px;right: 400px;" class="button" onclick="move()">Move 3</button>
    <button style="top: 310px;right: 200px;" class="button" onclick="move()">Move 4</button>
  </div><hr/>

  <h3 id="game-filter" class="gamesection">
           <span>Game</span></h3>
        <div id="game-filter-div" style="padding: 0;">
            <ul id="textlist">
            </ul>
        </div>

  <form id="searchForm">
  <input type="text" name="playername" placeholder="Name"> <br>
  <input type="radio" name="position" value="p1" checked> Bulbasaur<br>
  <input type="radio" name="position" value="p2"> Charmander<br>
  <input type="submit" value="Submit">
</form>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script>

    window.pos = "p1"
    window.name = "player1"

    move = function() {
          command = '"source":0,"target":1,"move":0' //p1
          if (window.pos == "p2") {
            command = '"source":1,"target":0,"move":0'
          }

          $.ajax({
            url: 'http://localhost:8080/move',
            data: '{"game":"test","player":"'+window.name+'","command":{'+command+'}}',
            dataType: 'json',
            type: 'post',
            success: function(data) { 
                var response = $('.response')
                response.text(JSON.stringify(data));

                var list = "";
                for(i=0; i<data.length; i++){
                      list +="<li>"+JSON.stringify(data[i])+"</li>";
                }
                $("#textlist").append(list);

            },
            error: function() {
              console.log('Error!');
            }
          });
        }

    $( "#searchForm" ).submit(function( event ) {

      // Stop form from submitting normally
      event.preventDefault();

      var $form = $( this ),
        name = $form.find( "input[name='playername']" ).val(),
        pos = $form.find( "input[name='position']:checked" ).val();

        window.name = name;
        window.pos = pos;

      if (pos == "p1") {
        $("#selfimg").attr("src","Spr_b_4p_001.png");
        $("#enemyimg").attr("src","Spr_4h_004.png");
      } else if (pos == "p2") {
        $("#selfimg").attr("src","Spr_b_4p_004.png");
        $("#enemyimg").attr("src","Spr_3f_001.png");
      }
    });

  </script>
</body>
</html>
